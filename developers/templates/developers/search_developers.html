{% extends 'base.html' %}

{% block content %}
  <h1>Поиск исполнителей</h1>
  <form id="form_search_developers" action="{% url 'developers:search_developers' %}" method=get>
      <div class="form-group">
          <label for="input_year">Введите имя исполнителя:</label>
	  <input name="developer_name" id="input_developer_name" class="form-control" type="text" placeholder="Имя разработчка" value="{{ form.developer_name }}">
      </div>
      <button type="submit" class="btn btn-primary">Поиск</button>
  </form>
    {% if search_result %}
        {{ search_result }}
        <table id="search_developers_table" class="table table-hover" style="margin-top: 20px;">
              <thead>
                  <colgroup>
                      <col style="width:12%;" />
                      <col style="width:12%;" />
                      <col style="width:25%;" />
                      <col style="width:25%;" />
                      <col style="width:25%;" />
                  </colgroup>
                  <tr>
                      <th>Фото</th>
                      <th>Логин</th>
                      <th>Имя</th>
                      <th>Почтa</th>
                      <th>Избранное</th>
                  </tr>
              </thead>
              <tbody>
                  {% for developer in search_result %}
                  <tr{% if developer.is_in_library %} style="background-color:lightgrey"{% endif %}>
                         <td>
                         {% if developer.avatar_url %}
                             <img src="{{ developer.avatar_url }}" alt="{{ developer.name }}" style="width:90%; height: auto">
                         {% endif %}
                         </td>
                      <td>
                          {{ developer.nickname }}
                      </td>
                         <td>
                             {{ developer.name }}
                         </td>
                         <td>
                             {{ developer.email }}
                         </td>
                         <td>
                             <a href="{% url 'developers:search_developers' %}?developer_name={{ form.developer_name }}&{% if developer.is_in_library %}rm{% else %}add{% endif %}_developer={{ developer.nickname }}">{% if developer.is_in_library %}удалить{% else %}добавить{% endif %}</a>
                         </td>
                      </tr>
                   {% endfor %}
               </tbody>
           </table>
    {% endif %}


{% endblock %}